<template>
  <section class="sitios-section">
    <div class="container">
      <h2 class="section-title">Sitios recomendados para tus estudios</h2>
      <p class="section-subtitle">
        Accede a libros, revistas, normas y otras fuentes externas disponibles de uso público.
      </p>
      <div class="sites-carousel">
        <div class="carousel-wrapper" ref="carouselWrapper">
          <div class="carousel-container" :style="windowWidth > 768 && totalPages > 0 ? { transform: `translateX(-${carouselTransform}%)` } : {}">
            <!-- Desktop: cards individuales -->
            <div 
              v-for="site in sites" 
              :key="site.id"
              class="site-card desktop-card"
            >
              <div class="site-icon">
                <svg v-if="site.iconType === 'book'" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M56.1863 47.4557C56.0219 48.504 55.0969 49.2645 54.0487 49.1823C53.2471 49.1412 52.1166 48.9562 50.8217 48.7301C48.5607 48.3396 45.7448 47.8668 42.8672 47.8668C39.4963 47.8668 36.886 48.6479 34.7894 49.2851C34.5222 49.3673 34.2756 49.4289 34.0289 49.5111V19.0499C35.8583 17.8783 40.5652 15.2063 45.5187 15.1857C45.5598 15.1857 49.3418 14.8569 53.0621 16.604C54.7886 17.4056 56.6385 19.1321 56.6385 21.0026V35.596C56.6796 39.4396 56.7001 44.2287 56.1863 47.4763V47.4557ZM29.1576 49.2851C27.0611 48.6479 24.4507 47.8668 21.0798 47.8668C18.2023 47.8668 15.3863 48.3396 13.1254 48.7301C11.8305 48.9562 10.7 49.1412 9.8984 49.1823C8.87069 49.2439 7.9252 48.504 7.76077 47.4557C7.24691 44.2082 7.26747 39.4191 7.28802 35.5754V20.982C7.28802 19.1116 9.13789 17.385 10.8644 16.5834C14.5847 14.8569 18.3667 15.1652 18.6133 15.1857C23.423 15.1857 28.0888 17.8578 29.9181 19.0294V49.4906C29.6715 49.4084 29.4248 49.3467 29.1576 49.2645V49.2851ZM60.7699 35.5549V21.0026C60.7699 17.0562 57.5634 14.158 54.8297 12.8837C50.0612 10.6638 45.3543 11.0749 45.3543 11.0955C39.6197 11.0955 34.3167 13.9936 31.9941 15.4735C29.692 13.9936 24.4302 11.0955 18.86 11.0955C18.675 11.0749 13.9476 10.6433 9.179 12.8837C6.4453 14.158 3.2183 17.0562 3.2183 21.0026V35.5754C3.17719 39.5629 3.15664 44.537 3.73216 48.1135C4.22546 51.2582 6.95916 53.4781 10.1656 53.2931C11.1933 53.2314 12.4266 53.0259 13.8448 52.7793C16.0646 52.4093 18.5928 51.9776 21.121 51.9776C23.8958 51.9776 26.0745 52.6354 28.0066 53.2109C28.4382 53.3342 28.8493 53.4575 29.2604 53.5809C30.1648 53.8275 31.0897 53.9508 31.9941 53.9508C32.8985 53.9508 33.844 53.8275 34.7483 53.5809C35.1594 53.4781 35.5705 53.3342 36.0021 53.2109C37.9342 52.6354 40.1335 51.9776 42.8878 51.9776C45.4159 51.9776 47.9441 52.4093 50.1639 52.7793C51.5822 53.0259 52.8154 53.2314 53.8431 53.2931C57.0907 53.4781 59.7833 51.2377 60.2766 48.1135C60.8521 44.5165 60.811 39.5424 60.7904 35.5549H60.7493H60.7699Z" fill="#024588"/>
                </svg>
                <svg v-else-if="site.iconType === 'document'" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M50.4405 56.2601C49.295 55.2987 46.6562 52.9463 46.6562 52.9463C45.8789 52.2508 44.713 52.2508 43.9357 52.9463C43.9357 52.9463 41.3378 55.2577 40.1923 56.2396C40.09 54.6236 40.1309 50.9416 40.2332 47.2187C41.7878 47.9347 43.5061 48.3438 45.3062 48.3438C47.1063 48.3438 48.8654 47.9347 50.42 47.2187C50.5019 51.003 50.5223 54.7464 50.42 56.2601H50.4405ZM45.3062 27.8883C49.8268 27.8883 53.4884 31.5499 53.4884 36.0706C53.4884 40.5912 49.8268 44.2527 45.3062 44.2527C40.7855 44.2527 37.124 40.5912 37.124 36.0706C37.124 31.5499 40.7855 27.8883 45.3062 27.8883ZM57.5794 36.0706C57.5794 29.2998 52.0769 23.7973 45.3062 23.7973C38.5354 23.7973 33.0329 29.2998 33.0329 36.0706C33.0329 39.2411 34.2398 42.1253 36.224 44.2936C36.1217 47.1369 35.8353 56.0146 36.2444 57.7329C36.2444 57.8351 36.3058 57.9988 36.3262 58.1011C36.6944 59.267 37.5536 60.1466 38.6991 60.4739C39.9673 60.8421 41.4196 60.5148 42.5651 59.5738C43.1379 59.1034 44.3448 58.0397 45.3062 57.201C46.2676 58.0397 47.4745 59.1034 48.0472 59.5738C48.8859 60.2489 49.8677 60.6171 50.8496 60.6171C51.2178 60.6171 51.5655 60.5762 51.9133 60.4739C53.0588 60.1466 53.9179 59.267 54.3475 57.917C54.7975 56.0351 54.552 47.0756 54.4498 44.2527C56.393 42.0845 57.5999 39.2207 57.5999 36.0706H57.5794ZM21.987 9.25342C22.8256 8.33293 23.9302 7.76018 25.1371 7.53517V17.6606C25.1371 18.7857 24.2166 19.7062 23.0916 19.7062H11.8001C12.0661 19.1334 12.4343 18.622 12.9047 18.172L21.987 9.25342ZM23.0916 23.7973C26.4872 23.7973 29.2282 21.0358 29.2282 17.6606V7.43289H42.5242C45.3675 7.43289 47.8222 9.35571 48.4972 12.1376C48.9063 13.8559 49.2132 15.7174 49.4382 17.8652C49.5405 18.9289 50.4405 19.7062 51.4837 19.7062H51.7087C52.8338 19.5834 53.652 18.5811 53.5293 17.4561C53.2838 15.1242 52.9361 13.0786 52.486 11.1967C51.3814 6.57378 47.2904 3.3418 42.5242 3.3418H26.078C23.3779 3.3418 20.7801 4.4873 19.0209 6.41011L10.0001 15.2469C8.36363 16.8629 7.34085 18.9902 7.1363 21.2812L7.05448 22.2222C6.7681 25.4337 6.3999 29.4225 6.3999 31.9999C6.3999 42.1867 6.84992 48.0165 7.99543 52.8031C9.10002 57.426 13.1911 60.658 17.9572 60.658H27.3667C28.4918 60.658 29.4123 59.7375 29.4123 58.6124C29.4123 57.4874 28.4918 56.5669 27.3667 56.5669H17.9572C15.1139 56.5669 12.6593 54.6441 11.9842 51.8622C10.9206 47.4233 10.5114 41.8799 10.5114 32.0204C10.5114 29.9339 10.7774 26.7019 11.0433 23.8382H23.0711V23.7973H23.0916Z" fill="#024588"/>
                </svg>
                <svg v-else-if="site.iconType === 'people'" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M37.6623 51.9337C36.1209 51.6045 35.2371 51.4811 32.0105 51.4811C28.7838 51.4811 27.7768 51.6251 26.3587 51.9337C24.2624 52.3862 21.5495 53.8262 20.378 58.2285C20.0903 59.3188 20.748 60.4502 21.8372 60.7382C22.0016 60.7794 22.1866 60.7999 22.351 60.7999C23.2553 60.7999 24.0979 60.1828 24.3446 59.2571C25.0228 56.6857 26.297 56.1302 27.2013 55.9451C28.3317 55.6982 28.8866 55.5954 32.0105 55.5954C35.1344 55.5954 35.6893 55.7188 36.7991 55.9451C37.7034 56.1302 38.9776 56.6857 39.6558 59.2571C39.9024 60.1828 40.7245 60.7999 41.6494 60.7999C41.8138 60.7999 41.9987 60.7999 42.1632 60.7382C43.2524 60.4502 43.9101 59.3188 43.6223 58.2285C42.4714 53.8262 39.738 52.3657 37.6417 51.9337H37.6623ZM46.849 21.3028C46.849 23.36 48.5343 25.0468 50.5895 25.0468C52.6447 25.0468 54.3299 23.36 54.3299 21.3028C54.3299 19.2457 52.6447 17.5588 50.5895 17.5588C48.5343 17.5588 46.849 19.2457 46.849 21.3028ZM42.7386 21.3028C42.7386 16.9622 46.253 13.4445 50.5895 13.4445C54.9259 13.4445 58.4403 16.9622 58.4403 21.3028C58.4403 25.6434 54.9259 29.1611 50.5895 29.1611C46.253 29.1611 42.7386 25.6434 42.7386 21.3028ZM60.7833 41.6274L60.5572 39.9405C60.1256 36.2377 58.4814 33.872 55.5631 32.6994C53.9394 32.0617 51.7404 31.9588 50.5689 31.9588C49.3975 31.9588 47.1984 32.0617 45.5953 32.6994C45.1432 32.8845 44.7322 33.0902 44.3211 33.3371C43.3552 33.9337 43.0469 35.1885 43.6223 36.1554C44.0128 36.7931 44.6911 37.1428 45.3898 37.1428C45.7598 37.1428 46.1297 37.04 46.4585 36.8342C46.664 36.7108 46.8901 36.608 47.1162 36.5051C47.815 36.2171 49.1508 36.0525 50.5895 36.0525C52.0281 36.0525 53.364 36.2171 54.0628 36.5051C55.0698 36.896 56.1591 37.5542 56.4879 40.4137L56.714 42.1211C56.9195 43.6639 56.5084 44.0342 55.9741 44.24L46.4174 44.2811C45.2871 44.2811 44.3622 45.2068 44.3622 46.3382C44.3622 47.4697 45.2871 48.3954 46.4174 48.3954L56.3029 48.3542H56.3235C56.529 48.3542 56.714 48.3542 56.9195 48.2514C56.9606 48.2514 57.0222 48.2102 57.0839 48.1897C58.7692 47.5931 61.2765 45.9885 60.7216 41.6068H60.7627L60.7833 41.6274ZM9.75266 21.3028C9.75266 23.36 11.4379 25.0468 13.4931 25.0468C15.5483 25.0468 17.2336 23.36 17.2336 21.3028C17.2336 19.2457 15.5483 17.5588 13.4931 17.5588C11.4379 17.5588 9.75266 19.2457 9.75266 21.3028ZM5.64226 21.3028C5.64226 16.9622 9.15665 13.4445 13.4931 13.4445C17.8296 13.4445 21.344 16.9622 21.344 21.3028C21.344 25.6434 17.8296 29.1611 13.4931 29.1611C9.15665 29.1611 5.64226 25.6434 5.64226 21.3028ZM28.2495 11.0582C28.2495 13.1154 29.9347 14.8022 31.9899 14.8022C34.0451 14.8022 35.7304 13.1154 35.7304 11.0582C35.7304 9.00109 34.0451 7.31424 31.9899 7.31424C29.9347 7.31424 28.2495 9.00109 28.2495 11.0582ZM24.1391 11.0582C24.1391 6.71767 27.6534 3.19995 31.9899 3.19995C36.3264 3.19995 39.8408 6.71767 39.8408 11.0582C39.8408 15.3988 36.3264 18.9165 31.9899 18.9165C27.6534 18.9165 24.1391 15.3988 24.1391 11.0582ZM36.1003 40.2079C36.1003 37.9451 34.2506 36.0937 31.9899 36.0937C29.7292 36.0937 27.8795 37.9451 27.8795 40.2079C27.8795 42.4708 29.7292 44.3222 31.9899 44.3222C34.2506 44.3222 36.1003 42.4708 36.1003 40.2079ZM40.2107 40.2079C40.2107 44.7542 36.5114 48.4365 31.9899 48.4365C27.4685 48.4365 23.7691 44.7337 23.7691 40.2079C23.7691 35.6822 27.4685 31.9794 31.9899 31.9794C36.5114 31.9794 40.2107 35.6822 40.2107 40.2079ZM7.57415 40.4342C7.90298 37.5954 9.01279 36.9371 9.99928 36.5462C10.6981 36.2788 12.0339 36.0937 13.4726 36.0937C14.9112 36.0937 16.2471 36.2582 16.9459 36.5462C17.1719 36.6285 17.398 36.7519 17.6035 36.8754C17.9324 37.0811 18.3023 37.1839 18.6722 37.1839C19.371 37.1839 20.0492 36.8342 20.4397 36.1965C21.0357 35.2297 20.7274 33.9542 19.7409 33.3782C19.3504 33.1314 18.9188 32.9257 18.4667 32.7405C16.8431 32.1028 14.644 32 13.4726 32C12.3011 32 10.102 32.1028 8.49899 32.7405C5.5806 33.8925 3.93645 36.2582 3.50485 39.9611L3.27878 41.6685C2.72388 46.0297 5.23122 47.6548 6.91648 48.2514H6.93704C6.93704 48.2514 7.0398 48.2925 7.10145 48.3131C7.30697 48.3748 7.49194 48.3954 7.69746 48.4159L17.583 48.4571C18.7133 48.4571 19.6382 47.5314 19.6382 46.3999C19.6382 45.2685 18.7339 44.3428 17.583 44.3428L8.02629 44.3017C7.51249 44.0959 7.10145 43.7257 7.28642 42.1828L7.51249 40.4548H7.5536L7.57415 40.4342ZM22.536 27.2274C23.317 24.8822 24.7762 23.3188 27.0163 22.4137C28.6399 21.7759 30.839 21.6731 32.0105 21.6731C33.1819 21.6731 35.3604 21.7759 36.9841 22.4137C39.2242 23.2982 40.6834 24.8822 41.4644 27.2274C41.8138 28.2971 41.2383 29.4697 40.1491 29.8194C39.9435 29.8811 39.7175 29.9222 39.5119 29.9222C38.6488 29.9222 37.8472 29.3668 37.5595 28.5028C37.169 27.3302 36.573 26.6719 35.4632 26.24C34.7644 25.952 33.4286 25.7874 31.9899 25.7874C30.5513 25.7874 29.2154 25.952 28.5166 26.24C27.4274 26.6719 26.8108 27.3302 26.4203 28.5028C26.1326 29.3668 25.3311 29.9222 24.4679 29.9222C24.2624 29.9222 24.0363 29.8811 23.8308 29.8194C22.7621 29.4697 22.1661 28.2971 22.5154 27.2274H22.536Z" fill="#024588"/>
                </svg>
                <svg v-else-if="site.iconType === 'search'" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="28" cy="28" r="10" stroke="#003366" stroke-width="2.5" fill="none"/>
                  <path d="M38 38L48 48" stroke="#003366" stroke-width="2.5" stroke-linecap="round"/>
                </svg>
                <svg v-else-if="site.iconType === 'library'" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect x="14" y="16" width="36" height="32" rx="2" stroke="#003366" stroke-width="2.5" fill="none"/>
                  <path d="M18 20H46M18 26H46M18 32H40M18 38H40" stroke="#003366" stroke-width="2" stroke-linecap="round"/>
                  <path d="M14 16V48M50 16V48" stroke="#003366" stroke-width="2.5"/>
                </svg>
                <svg v-else-if="site.iconType === 'thomson-reuters'" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M32 8.05363C31.6164 8.05363 30.6362 8.16017 30.0822 9.18302L29.8904 9.46005C27.6742 12.2942 25.8203 16.1938 24.3073 19.6246C23.5828 20.9458 22.4747 21.7556 21.1535 22.0113L9.24157 24.2914C8.09087 24.5045 7.68599 25.3995 7.55813 25.7617C7.43028 26.124 7.23849 27.0829 8.04825 27.9353L16.3376 36.7787C17.2539 37.7376 17.6801 39.0588 17.5096 40.38L15.9967 52.4198C15.8475 53.5705 16.572 54.2311 16.8916 54.4655C17.2113 54.6999 18.0637 55.1687 19.1078 54.6786L30.0822 49.5217C31.2755 48.9677 32.6606 48.9464 33.8752 49.5217L44.8496 54.6786C45.915 55.1687 46.7461 54.6786 47.0657 54.4655C47.3854 54.2311 48.1099 53.5705 47.9607 52.4198L46.4478 40.38C46.2773 39.0588 46.7035 37.7589 47.6198 36.7787L55.9091 27.9353C56.7189 27.0829 56.5058 26.124 56.3992 25.7617C56.2714 25.3995 55.8665 24.5045 54.7158 24.2914L42.8039 22.0113C41.504 21.7556 40.3959 20.9458 39.7353 19.7951L33.8752 9.18302C33.3212 8.16017 32.341 8.05363 31.9574 8.05363H32ZM18.1702 59.1962C16.849 59.1962 15.5278 58.77 14.3984 57.9602C12.4593 56.5538 11.5004 54.295 11.7774 51.9296L13.2904 39.8899L4.95839 30.876C3.31757 29.1286 2.78483 26.742 3.53066 24.4618C4.27649 22.1817 6.10909 20.5622 8.45313 20.1147L20.3651 17.8346C22.0272 14.276 23.9877 10.142 26.4383 6.96686C27.6103 4.96378 29.6773 3.79175 32 3.79175C34.3227 3.79175 36.4963 5.04902 37.647 7.13734L43.5071 17.7494L55.5469 20.136C57.8909 20.5835 59.7235 22.2031 60.4693 24.4832C61.2152 26.7633 60.6824 29.1499 59.0416 30.8973L50.7523 39.7407L52.2013 51.9296C52.4996 54.295 51.5194 56.5538 49.5802 57.9602C47.6411 59.3666 45.2118 59.601 43.0383 58.5782L32.0639 53.4213L20.9191 58.5782C20.0241 59.0044 19.0865 59.1962 18.1702 59.1962Z" fill="#024588"/>
                </svg>
                <svg v-else-if="site.iconType === 'normas'" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M41.031 35.7297C42.2858 37.9514 42.2447 40.4816 40.9281 42.6622C38.7681 46.2005 35.1887 51.117 28.8939 54.3056V57.1444C28.9145 58.2758 28.0093 59.2015 26.8779 59.2221C25.7465 59.2221 24.8208 58.317 24.8208 57.1855V53.0713C24.8208 53.0713 24.8208 52.9067 24.8414 52.8244C24.8619 52.6393 24.8825 52.4747 24.9442 52.3101C25.0059 52.1661 25.0882 52.0633 25.1705 51.9399C25.2322 51.837 25.2939 51.7341 25.3762 51.6519C25.5202 51.5079 25.6848 51.405 25.8699 51.3021C25.9316 51.261 25.9728 51.2199 26.0139 51.1993C32.0619 48.5044 35.4356 43.8348 37.431 40.5433C37.9864 39.6382 37.9864 38.6919 37.4721 37.7868C37.1842 37.2725 36.6699 36.9228 36.0939 36.7994C35.7442 36.7377 35.1064 36.6965 34.4893 37.2108L33.8927 37.6839C30.2928 40.6051 26.2196 43.917 22.4345 43.917H19.7397C15.214 43.917 14.3089 44.061 12.6837 44.3079C9.7626 44.7605 8.21975 46.3856 7.68489 49.5742C7.43804 50.8907 7.31461 52.2279 7.31461 53.5239V57.1855C7.29404 58.317 6.36833 59.2221 5.23691 59.2221C4.10549 59.2221 3.17978 58.2964 3.20035 57.1444V53.4827C3.22092 51.9399 3.36492 50.3764 3.65292 48.8336C4.49634 43.9376 7.3969 40.9342 12.0666 40.2142C13.9797 39.9056 15.1111 39.7616 19.7603 39.7616H22.4551C24.7797 39.7616 28.5648 36.6965 31.3213 34.4542L31.9179 33.9605C33.3167 32.8291 35.127 32.3765 36.8756 32.7057C36.8961 32.7057 36.9373 32.7057 36.9579 32.7263L44.7955 22.9343C45.5155 22.0497 46.8115 21.9057 47.6961 22.6052C48.5807 23.3046 48.7247 24.6006 48.0252 25.5057L40.5167 34.9068C40.7224 35.1537 40.9281 35.4211 41.0927 35.7091H41.031V35.7297ZM60.7589 23.2223C60.7589 28.036 60.2857 32.0268 59.36 35.0302C58.3315 38.3834 54.608 40.7079 50.3086 40.7079H48.4161C47.2847 40.7079 46.359 39.7822 46.359 38.6508C46.359 37.5194 47.2847 36.5937 48.4161 36.5937H50.3086C52.7361 36.5937 54.9372 35.4005 55.4309 33.8165C56.2332 31.204 56.6446 27.6451 56.6446 23.2223C56.6446 18.7995 56.2332 15.2406 55.4309 12.6281C55.4309 12.6075 55.4103 12.5869 55.3898 12.5664C55.3075 12.3401 55.184 12.1138 55.04 11.8875C55.04 11.8875 55.0195 11.8464 54.9989 11.8258C54.8549 11.6201 54.6903 11.435 54.4846 11.2704C54.464 11.2498 54.4435 11.2292 54.4023 11.2087C54.1966 11.0235 53.9703 10.8795 53.7029 10.7149C53.7029 10.7149 53.6618 10.6944 53.6618 10.6738C53.3943 10.5298 53.1063 10.3858 52.7978 10.283C52.7361 10.2624 52.6538 10.2418 52.5921 10.2212C52.3041 10.1184 52.0161 10.0567 51.7281 9.99496C51.6252 9.99496 51.5429 9.95382 51.4401 9.93325C51.0698 9.87153 50.6789 9.83038 50.3086 9.83038H22.7842C22.3934 9.83038 22.0231 9.87153 21.6528 9.93325C21.55 9.93325 21.4677 9.97439 21.3648 9.99496C21.0562 10.0567 20.7682 10.139 20.4802 10.2212C20.4185 10.2418 20.3568 10.2624 20.2951 10.283C19.9865 10.4064 19.6985 10.5298 19.4311 10.6738C19.4311 10.6738 19.4105 10.6738 19.39 10.6944C19.1431 10.8384 18.8963 11.003 18.6905 11.1881C18.67 11.2087 18.6288 11.2292 18.6083 11.2498C18.4025 11.4349 18.238 11.6201 18.094 11.8052C18.094 11.8052 18.094 11.8464 18.0528 11.867C17.9088 12.0932 17.7854 12.3195 17.7031 12.5458C17.7031 12.5664 17.7031 12.5869 17.7031 12.6075C17.5385 13.1629 17.374 13.7595 17.2506 14.3766C17.0448 15.3435 16.2014 16.0018 15.2346 16.0018C15.0906 16.0018 14.9466 16.0018 14.8026 15.9606C13.6917 15.7344 12.9717 14.6235 13.2186 13.5126C13.3831 12.7721 13.5683 12.0727 13.774 11.3938C13.774 11.3527 13.8151 11.3115 13.8151 11.2704V11.2292C13.8151 11.2292 13.8974 11.0852 13.918 11.0235C14.0003 10.8178 14.0826 10.6121 14.1854 10.4064C14.1854 10.3652 14.1854 10.3035 14.2266 10.2624C14.3089 10.0978 14.4323 9.95382 14.5146 9.80982C14.5557 9.74811 14.5969 9.68638 14.638 9.6041C14.7409 9.43953 14.8643 9.27496 14.9877 9.13097C15.0083 9.11039 15.0289 9.06925 15.07 9.04868C15.3168 8.74011 15.6048 8.4521 15.8928 8.20525C15.9546 8.1641 16.0163 8.10239 16.0574 8.06125C16.3454 7.83496 16.6334 7.60868 16.942 7.40297C17.0037 7.36182 17.0654 7.32069 17.1066 7.27954C17.1683 7.2384 17.23 7.21782 17.2917 7.17668C17.5591 7.01211 17.8471 6.86811 18.1351 6.74469C18.238 6.70354 18.3408 6.64183 18.4643 6.60069C18.6288 6.53897 18.7728 6.4567 18.9374 6.41555H18.9991C19.1431 6.35384 19.3077 6.33327 19.4517 6.27155L19.822 6.14812C20.0688 6.0864 20.3362 6.0247 20.6037 5.98356C20.7271 5.96299 20.8505 5.9424 20.9945 5.92183C21.0974 5.92183 21.1797 5.88069 21.2825 5.88069C21.7762 5.81898 22.27 5.77783 22.7842 5.77783H50.3498C50.8641 5.77783 51.3578 5.81898 51.8515 5.88069C51.9543 5.88069 52.0366 5.92183 52.1395 5.92183C52.2629 5.92183 52.3863 5.96299 52.5303 5.98356C52.7978 6.0247 53.0446 6.0864 53.3121 6.14812C53.4355 6.18926 53.5589 6.23041 53.7029 6.27155C53.8469 6.3127 53.9909 6.35383 54.1143 6.39498C54.1349 6.39498 54.176 6.39498 54.1966 6.41555H54.2172C54.3818 6.47727 54.5258 6.53897 54.6903 6.60069C54.8138 6.64183 54.9166 6.70354 55.0195 6.74469C55.3075 6.86811 55.5955 7.01211 55.8629 7.17668C55.9246 7.21782 55.9863 7.2384 56.048 7.27954C56.1098 7.32069 56.1715 7.36182 56.2332 7.40297C56.5417 7.60868 56.8297 7.81439 57.1177 8.06125C57.1795 8.10239 57.2412 8.1641 57.3029 8.20525C57.5909 8.47267 57.8789 8.74011 58.1257 9.04868C58.1463 9.08982 58.1875 9.1104 58.208 9.15154C58.3315 9.31611 58.4343 9.4601 58.5577 9.62467C58.5989 9.68639 58.64 9.7481 58.6812 9.83038C58.784 9.97438 58.8869 10.1184 58.9692 10.283C58.9692 10.3241 58.9692 10.3858 59.0103 10.427C59.1132 10.6121 59.1954 10.8178 59.2572 11.0235C59.2777 11.1058 59.3394 11.1675 59.36 11.2498V11.2909C59.36 11.2909 59.4012 11.3732 59.4012 11.3938C60.3269 14.3972 60.8 18.388 60.8 23.2017L60.7589 23.2223ZM17.4974 24.2509C19.7603 24.2509 21.5911 26.0817 21.5911 28.3446C21.5911 30.6074 19.7603 32.4383 17.4974 32.4383C15.2346 32.4383 13.4037 30.6074 13.4037 28.3446C13.4037 26.0817 15.2346 24.2509 17.4974 24.2509ZM17.4974 36.5731C22.0231 36.5731 25.7054 32.8908 25.7054 28.3651C25.7054 23.8394 22.0231 20.1572 17.4974 20.1572C12.9717 20.1572 9.28946 23.8394 9.28946 28.3651C9.28946 32.8908 12.9717 36.5731 17.4974 36.5731Z" fill="#024588"/>
                </svg>
                <svg v-else-if="site.iconType === 'diario-oficial'" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M25.8448 36.1687C25.8448 35.0364 26.7711 34.1101 27.9034 34.1101H44.3723C45.5045 34.1101 46.4309 35.0364 46.4309 36.1687C46.4309 37.3009 45.5045 38.2273 44.3723 38.2273H27.9034C26.7711 38.2273 25.8448 37.3009 25.8448 36.1687ZM25.8448 25.8756C25.8448 24.7434 26.7711 23.817 27.9034 23.817H44.3723C45.5045 23.817 46.4309 24.7434 46.4309 25.8756C46.4309 27.0078 45.5045 27.9342 44.3723 27.9342H27.9034C26.7711 27.9342 25.8448 27.0078 25.8448 25.8756ZM25.8448 15.5825C25.8448 14.4503 26.7711 13.5239 27.9034 13.5239H44.3723C45.5045 13.5239 46.4309 14.4503 46.4309 15.5825C46.4309 16.7148 45.5045 17.6412 44.3723 17.6412H27.9034C26.7711 17.6412 25.8448 16.7148 25.8448 15.5825ZM52.5244 56.7548C52.5244 56.7548 52.4626 56.7754 52.4215 56.7754C52.3803 56.7754 52.3597 56.7548 52.3185 56.7548H31.7736C32.6176 55.3756 33.1117 53.7698 33.1117 52.0406C33.1117 50.3114 32.9881 49.1379 32.6794 47.9645H56.0652L56.1475 48.2733C56.4563 49.282 56.6622 49.9408 56.6622 51.9994C56.6622 54.4903 54.7889 56.6313 52.5038 56.7548H52.5244ZM20.2042 52.37V17.7853C20.2042 17.7853 20.2247 17.7029 20.2247 17.6412C20.2247 17.5794 20.2042 17.5588 20.2042 17.4971V11.7947C20.2042 11.7947 20.2247 11.7123 20.2247 11.6506C20.2247 10.0449 19.7513 8.5421 18.969 7.26576H46.1427C48.5719 7.26576 50.5275 9.24201 50.5275 11.6506V43.8268H32.6588C31.3824 43.8268 30.1884 44.4032 29.4062 45.4325C28.6239 46.4618 28.3563 47.7587 28.6856 49.0144C28.8297 49.5908 28.9739 50.3525 28.9739 52.02C28.9739 54.3462 27.3887 56.3431 25.3095 56.6725C24.0126 56.8783 22.7363 56.5283 21.7275 55.6843C20.7394 54.8403 20.1836 53.6257 20.1836 52.3494L20.2042 52.37ZM8.30537 15.5825C7.35841 15.5825 7.31724 12.3299 7.31724 11.6712C7.31724 9.24203 9.29351 7.28634 11.7021 7.28634C14.1107 7.28634 15.9634 9.13909 16.0663 11.4653V15.6031H8.28479H8.30537V15.5825ZM60.1001 47.0176L60.0177 46.7499C59.4825 45.0001 57.8974 43.8473 56.0858 43.8473H54.6859V11.0742C54.6859 10.8683 54.6242 10.6831 54.5624 10.4772C53.986 6.33938 50.4658 3.12793 46.1633 3.12793H12.9167C12.7726 3.12793 12.649 3.18971 12.5255 3.21029C12.2579 3.18971 12.0109 3.12793 11.7227 3.12793C7.00845 3.14852 3.20001 6.95695 3.20001 11.6506C3.20001 16.9824 4.92925 19.6998 8.30537 19.6998H16.0869V52.3494C16.0869 54.8403 17.178 57.2077 19.0719 58.834C20.6159 60.1515 22.5921 60.8721 24.6096 60.8721C24.8978 60.8721 25.1654 60.8309 25.4536 60.8103C25.5771 60.8103 25.6801 60.8721 25.783 60.8721H52.3185C52.3185 60.8721 52.442 60.8309 52.5038 60.8309C52.5861 60.8309 52.6479 60.8721 52.7302 60.8721C57.2592 60.625 60.8 56.7342 60.8 51.9994C60.8 49.3026 60.45 48.191 60.0795 47.0382H60.1001V47.0176Z" fill="#024588"/>
                </svg>
                <svg v-else-if="site.iconType === 'eni'" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M32 8.05363C31.6164 8.05363 30.6362 8.16017 30.0822 9.18302L29.8904 9.46005C27.6742 12.2942 25.8203 16.1938 24.3073 19.6246C23.5828 20.9458 22.4747 21.7556 21.1535 22.0113L9.24157 24.2914C8.09087 24.5045 7.68599 25.3995 7.55813 25.7617C7.43028 26.124 7.23849 27.0829 8.04825 27.9353L16.3376 36.7787C17.2539 37.7376 17.6801 39.0588 17.5096 40.38L15.9967 52.4198C15.8475 53.5705 16.572 54.2311 16.8916 54.4655C17.2113 54.6999 18.0637 55.1687 19.1078 54.6786L30.0822 49.5217C31.2755 48.9677 32.6606 48.9464 33.8752 49.5217L44.8496 54.6786C45.915 55.1687 46.7461 54.6786 47.0657 54.4655C47.3854 54.2311 48.1099 53.5705 47.9607 52.4198L46.4478 40.38C46.2773 39.0588 46.7035 37.7589 47.6198 36.7787L55.9091 27.9353C56.7189 27.0829 56.5058 26.124 56.3992 25.7617C56.2714 25.3995 55.8665 24.5045 54.7158 24.2914L42.8039 22.0113C41.504 21.7556 40.3959 20.9458 39.7353 19.7951L33.8752 9.18302C33.3212 8.16017 32.341 8.05363 31.9574 8.05363H32ZM18.1702 59.1962C16.849 59.1962 15.5278 58.77 14.3984 57.9602C12.4593 56.5538 11.5004 54.295 11.7774 51.9296L13.2904 39.8899L4.95839 30.876C3.31757 29.1286 2.78483 26.742 3.53066 24.4618C4.27649 22.1817 6.10909 20.5622 8.45313 20.1147L20.3651 17.8346C22.0272 14.276 23.9877 10.142 26.4383 6.96686C27.6103 4.96378 29.6773 3.79175 32 3.79175C34.3227 3.79175 36.4963 5.04902 37.647 7.13734L43.5071 17.7494L55.5469 20.136C57.8909 20.5835 59.7235 22.2031 60.4693 24.4832C61.2152 26.7633 60.6824 29.1499 59.0416 30.8973L50.7523 39.7407L52.2013 51.9296C52.4996 54.295 51.5194 56.5538 49.5802 57.9602C47.6411 59.3666 45.2118 59.601 43.0383 58.5782L32.0639 53.4213L20.9191 58.5782C20.0241 59.0044 19.0865 59.1962 18.1702 59.1962Z" fill="#024588"/>
                </svg>
                <svg v-else-if="site.iconType === 'oit'" width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M43.0147 19.8544H18.8066C17.6971 19.8544 16.7893 18.9294 16.7893 17.7988C16.7893 16.6681 17.6971 15.7431 18.8066 15.7431H43.0147C44.1242 15.7431 45.032 16.6681 45.032 17.7988C45.032 18.9294 44.1242 19.8544 43.0147 19.8544ZM26.876 40.4523H18.8066C17.6971 40.4523 16.7893 39.5272 16.7893 38.3966C16.7893 37.266 17.6971 36.341 18.8066 36.341H26.876C27.9855 36.341 28.8933 37.266 28.8933 38.3966C28.8933 39.5272 27.9855 40.4523 26.876 40.4523ZM36.9627 26.0215C38.0722 26.0215 38.98 26.9465 38.98 28.0771C38.98 29.2078 38.0722 30.1328 36.9627 30.1328H18.8066C17.6971 30.1328 16.7893 29.2078 16.7893 28.0771C16.7893 26.9465 17.6971 26.0215 18.8066 26.0215H36.9627ZM19.8153 58.9123C19.8153 60.0429 18.9075 60.9679 17.798 60.9679C13.1178 60.9679 9.06291 57.72 7.97355 53.0741C6.84384 48.2844 6.40002 42.4258 6.40002 32.1679C6.40002 21.9101 6.84384 16.072 7.97355 11.2617C9.06291 6.61591 13.0976 3.36792 17.798 3.36792H44.0233C48.7036 3.36792 52.7584 6.61591 53.8478 11.2617C54.5337 14.1808 54.9573 17.5315 55.1994 21.7662C55.2599 22.8968 54.4126 23.8836 53.2829 23.9452H53.1619C52.0927 23.9452 51.2051 23.1024 51.1446 21.9923C50.9226 18.0043 50.5393 14.9002 49.914 12.2279C49.2483 9.45271 46.8476 7.49985 44.0233 7.49985H17.798C14.9939 7.49985 12.5731 9.43215 11.9074 12.2279C10.8583 16.6887 10.4549 22.2801 10.4549 32.1679C10.4549 42.0557 10.8583 47.6472 11.9074 52.108C12.5529 54.8831 14.9737 56.836 17.798 56.836C18.9075 56.836 19.8153 57.7611 19.8153 58.8917V58.9123ZM37.1644 54.2459C37.0232 54.3486 36.8618 54.4309 36.6802 54.4926L31.6369 55.9726L32.8877 50.6896C32.928 50.484 33.049 50.2579 33.1701 50.0934C39.1011 42.8986 44.447 37.4716 49.5105 33.5247L53.4443 37.5332C49.1877 43.5358 43.862 49.0039 37.1442 54.2459H37.1644ZM56.5107 34.8403L52.1532 30.4001C50.8016 29.0228 48.4413 28.9816 47.0292 30.2973C41.7438 34.4292 36.1961 40.0617 30.0836 47.4621C29.559 48.1199 29.1556 48.9011 28.974 49.7234L26.9163 58.4395C26.755 59.1589 26.9567 59.899 27.4812 60.3923C27.8645 60.7624 28.3688 60.9679 28.8732 60.9679C29.0547 60.9679 29.2564 60.9474 29.438 60.8857L37.81 58.4395C38.4757 58.2544 39.0809 57.9255 39.6256 57.5144C46.6257 52.0463 52.1936 46.3315 56.6519 40.0412C57.2571 39.3422 57.6 38.4583 57.6 37.5127C57.6 36.5054 57.2167 35.5598 56.5107 34.8403Z" fill="#024588"/>
                </svg>
                <svg v-else width="64" height="64" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect x="18" y="14" width="28" height="36" rx="2" stroke="#003366" stroke-width="2.5" fill="none"/>
                  <path d="M24 22H40M24 30H40M24 38H32" stroke="#003366" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </div>
              <div class="site-content">
                <h3 class="site-title">{{ site.name }}</h3>
                <a :href="site.url" target="_blank" class="btn btn-secondary">
                  Ir al sitio →
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-controls" v-if="totalPages > 0 || windowWidth <= 768">
        <button 
          class="carousel-btn"
          :disabled="windowWidth <= 768 ? isAtStart : currentIndex === 0"
          @click="previousSlide"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 18l-6-6 6-6"/>
          </svg>
        </button>
        <div class="carousel-dots" v-if="totalPages > 0 && windowWidth > 768">
          <span 
            v-for="(page, index) in totalPages"
            :key="index"
            :class="['dot', { active: index === currentIndex }]"
            @click="goToSlide(index)"
          ></span>
        </div>
        <button 
          class="carousel-btn"
          :disabled="windowWidth <= 768 ? isAtEnd : currentIndex >= totalPages - 1"
          @click="nextSlide"
        >
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 18l6-6-6-6"/>
          </svg>
        </button>
      </div>
    </div>
  </section>
</template>

<script>
import strapiService from '../../services/strapi'

export default {
  name: 'SitiosRecomendadosSection',
  data() {
    return {
      sites: [],
      currentIndex: 0,
      windowWidth: window.innerWidth,
      isAtStart: true,
      isAtEnd: false
    }
  },
  computed: {
    totalPages() {
      if (this.windowWidth <= 768) {
        return this.sites.length
      } else {
        // En desktop, si hay 8 o menos cards, no mostrar paginación
        if (this.sites.length <= 8) {
          return 0
        }
        // Desktop: avanza de 3 en 3, pero muestra 3.5 por vista
        const itemsPerView = 3.5
        const itemsPerSlide = 3
        const totalItems = this.sites.length
        
        if (totalItems <= itemsPerView) {
          return 1
        }
        
        // Calcular cuántos slides necesitamos si avanzamos de 3 en 3
        const remainingAfterFirst = totalItems - itemsPerView
        return Math.ceil(remainingAfterFirst / itemsPerSlide) + 1
      }
    },
    carouselTransform() {
      if (this.sites.length === 0) return 0
      
      const isMobile = this.windowWidth <= 768
      const itemsPerView = isMobile ? 1.087 : 3.5 // 1/0.92 ≈ 1.087 para mostrar solo un pequeño pedazo
      const itemsPerSlide = isMobile ? 1 : 3
      const totalItems = this.sites.length
      
      // Si estamos en el último slide, calcular el desplazamiento para mostrar el último elemento completo
      const isLastSlide = this.currentIndex >= this.totalPages - 1
      
      if (isLastSlide && totalItems > itemsPerView) {
        // Calcular el ancho total de todos los elementos
        const gapSize = isMobile ? 12 : 24
        if (isMobile) {
          // En móvil, calcular para que el último card se muestre completo
          const cardWidthPercent = 92
          const gapPercent = (gapSize / this.windowWidth) * 100
          // Calcular cuánto necesitamos desplazar para mostrar el último card completo
          const cardsBeforeLast = totalItems - 1
          const transformForLastCard = (cardWidthPercent * cardsBeforeLast) + (gapPercent * cardsBeforeLast)
          // Ajustar para que el último card se muestre completo (no demasiado a la izquierda)
          return Math.max(0, transformForLastCard - 2)
        } else {
          // En desktop, calcular para que el último card se muestre completo
          const cardWidthPercent = 100 / itemsPerView
          const gapPercent = (gapSize / this.windowWidth) * 100
          // Ajustar para que el último card se muestre completo, considerando que mostramos 3.5 cards
          // Si hay menos de 3.5 cards, no necesitamos desplazar
          if (totalItems <= itemsPerView) {
            return 0
          }
          // Calcular el ancho total del contenido
          const totalContentWidthPercent = (cardWidthPercent * totalItems) + (gapPercent * (totalItems - 1))
          // El transform máximo es el ancho total menos 100% (el viewport)
          const maxTransform = Math.max(0, totalContentWidthPercent - 100)
          return maxTransform
        }
      }
      
      // Para slides normales
      if (isMobile) {
        // En mobile: cada slide avanza el ancho de 1 card (92%) más el gap (12px)
        const cardWidthPercent = 92
        const gapSize = 12
        const gapPercent = (gapSize / this.windowWidth) * 100
        const slideMove = cardWidthPercent + gapPercent
        return this.currentIndex * slideMove
      } else {
        // En desktop: cada slide avanza de 3 elementos completos
        // Cada card ocupa aproximadamente: (100% - 48px) / 3.5
        // Para avanzar 3 elementos, necesitamos el ancho de 3 cards + 2 gaps (entre las 3 cards)
        const cardWidthPercent = 100 / itemsPerView
        const gapSize = 24
        const gapPercent = (gapSize / this.windowWidth) * 100
        // Avanzar de 3 elementos por slide: 3 cards + 2 gaps
        const slideMove = (cardWidthPercent * itemsPerSlide) + (gapPercent * (itemsPerSlide - 1))
        return this.currentIndex * slideMove
      }
    }
  },
  async mounted() {
    await this.loadSites()
    this.handleResize()
    window.addEventListener('resize', this.handleResize)
    this.$nextTick(() => {
      if (this.$refs.carouselWrapper && this.windowWidth <= 768) {
        this.$refs.carouselWrapper.addEventListener('scroll', this.handleScroll)
        this.updateScrollButtons()
      }
    })
  },
  beforeUnmount() {
    window.removeEventListener('resize', this.handleResize)
    if (this.$refs.carouselWrapper) {
      this.$refs.carouselWrapper.removeEventListener('scroll', this.handleScroll)
    }
  },
  methods: {
    async loadSites() {
      try {
        const response = await strapiService.getCollection('sitios-recomendados', {
          populate: '*',
          sort: 'orden:asc'
        })
        this.sites = response.data || []
      } catch (error) {
        console.error('Error loading sites:', error)
        // Datos de ejemplo - 8 sitios principales
        this.sites = [
          {
            id: 1,
            name: 'Revistas Académicas (Proquest)',
            url: 'https://www.proquest.com',
            iconType: 'book'
          },
          {
            id: 2,
            name: 'Portal de Revistas Académicas Chilenas',
            url: '#',
            iconType: 'document'
          },
          {
            id: 3,
            name: 'Biblioteca del Congreso',
            url: '#',
            iconType: 'people'
          },
          {
            id: 4,
            name: 'Normas Chilenas',
            url: '#',
            iconType: 'normas'
          },
          {
            id: 5,
            name: 'Diario Oficial de la República',
            url: '#',
            iconType: 'diario-oficial'
          },
          {
            id: 6,
            name: 'Biblioteca Thomson-Reuters',
            url: '#',
            iconType: 'thomson-reuters'
          },
          {
            id: 7,
            name: 'Biblioteca ENI',
            url: '#',
            iconType: 'eni'
          },
          {
            id: 8,
            name: 'Enciclopedia OIT',
            url: '#',
            iconType: 'oit'
          }
        ]
      }
    },
    previousSlide() {
      if (this.windowWidth <= 768) {
        // En mobile, usar scroll nativo
        this.scrollLeft()
      } else {
        // En desktop, usar el sistema de índices
      if (this.currentIndex > 0) {
        this.currentIndex--
        }
      }
    },
    nextSlide() {
      if (this.windowWidth <= 768) {
        // En mobile, usar scroll nativo
        this.scrollRight()
      } else {
        // En desktop, usar el sistema de índices
      if (this.currentIndex < this.totalPages - 1) {
        this.currentIndex++
        }
      }
    },
    goToSlide(index) {
      this.currentIndex = index
    },
    scrollLeft() {
      if (this.$refs.carouselWrapper) {
        const card = this.$refs.carouselWrapper.querySelector('.site-card')
        if (card) {
          const cardWidth = card.offsetWidth
          const gap = 16
          const scrollAmount = cardWidth + gap
          this.$refs.carouselWrapper.scrollBy({
            left: -scrollAmount,
            behavior: 'smooth'
          })
        }
      }
    },
    scrollRight() {
      if (this.$refs.carouselWrapper) {
        const card = this.$refs.carouselWrapper.querySelector('.site-card')
        if (card) {
          const cardWidth = card.offsetWidth
          const gap = 16
          const scrollAmount = cardWidth + gap
          this.$refs.carouselWrapper.scrollBy({
            left: scrollAmount,
            behavior: 'smooth'
          })
        }
      }
    },
    handleScroll() {
      this.updateScrollButtons()
    },
    updateScrollButtons() {
      if (this.$refs.carouselWrapper && this.windowWidth <= 768) {
        const container = this.$refs.carouselWrapper
        const scrollLeft = container.scrollLeft
        const scrollWidth = container.scrollWidth
        const clientWidth = container.clientWidth
        
        this.isAtStart = scrollLeft <= 0
        this.isAtEnd = scrollLeft + clientWidth >= scrollWidth - 1
      }
    },
    handleResize() {
      this.windowWidth = window.innerWidth
      this.$nextTick(() => {
        if (this.$refs.carouselWrapper && this.windowWidth <= 768) {
          this.$refs.carouselWrapper.addEventListener('scroll', this.handleScroll)
          this.updateScrollButtons()
        }
      })
    }
  }
}
</script>

<style scoped>
.sitios-section {
  padding: 60px 0;
  background: var(--white);
}

.section-title {
  text-align: center;
  font-size: 36px;
  color: var(--primary-blue);
  margin-bottom: 16px;
}

.section-subtitle {
  text-align: center;
  color: var(--text-light);
  font-size: 18px;
  margin-bottom: 40px;
}

.sites-carousel {
  overflow: visible;
  margin-bottom: 30px;
  position: relative;
}

.carousel-wrapper {
  overflow: hidden;
  width: 100%;
  padding-right: 0;
}

@media (min-width: 769px) {
  .carousel-wrapper {
    overflow: visible;
  }
}

.carousel-container {
  display: flex;
  transition: transform 0.5s ease;
  gap: 24px;
}

.site-card {
  width: calc((100% - 48px) / 3.5);
  min-width: calc((100% - 48px) / 3.5);
  flex-shrink: 0;
  background: var(--white);
  border-radius: 8px;
  padding: 24px;
  border: 2px solid var(--border-gray);
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  transition: transform 0.3s;
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 20px;
}

@media (min-width: 769px) {
  .carousel-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 24px;
    transition: none;
  }
  
  .site-card {
    width: 100%;
    min-width: 0;
    max-width: 100%;
  }
}

.site-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.site-icon {
  width: 64px;
  height: 64px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.site-icon svg {
  width: 100%;
  height: 100%;
}

.site-content {
  display: flex;
  flex-direction: column;
  flex: 1;
  gap: 16px;
}

.site-title {
  font-size: 18px;
  color: var(--primary-blue);
  font-weight: 600;
  margin: 0;
  line-height: 1.4;
}

.carousel-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 16px;
}

.carousel-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1px solid var(--border-gray);
  background: var(--white);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
  color: var(--text-light);
  padding: 0;
}

.carousel-btn:hover:not(:disabled),
.carousel-btn:active:not(:disabled) {
  background: var(--primary-blue);
  color: var(--white);
  border-color: var(--primary-blue);
}

.carousel-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.carousel-dots {
  display: flex;
  gap: 8px;
}

.dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--border-gray);
  cursor: pointer;
  transition: all 0.3s;
}

.dot.active {
  background: var(--primary-blue);
  width: 12px;
  height: 12px;
}

@media (max-width: 968px) {
  .site-card {
    min-width: calc(50% - 12px);
  }
}

@media (max-width: 768px) {
  .section-title {
    font-size: 30px;
    text-align: left;
    line-height: 1.2;
  }
  
  .section-subtitle {
    font-size: 16px;
    text-align: left;
  }
  
  .carousel-wrapper {
    overflow-x: auto;
    overflow-y: hidden;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
    padding-right: 20px;
  }
  
  .carousel-wrapper::-webkit-scrollbar {
    display: none;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .carousel-container {
    gap: 16px;
    transform: none !important;
  }
  
  .site-card {
    width: 85%;
    min-width: 85%;
    scroll-snap-align: start;
    border: 2px solid var(--border-gray);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  
  .carousel-dots {
    display: none;
  }
  
  .carousel-controls {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
    margin-top: 24px;
  }
}
</style>

